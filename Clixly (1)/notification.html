<!DOCTYPE html>
<html>
<head>
  <title>Clixly â€¢ Notifications</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; padding:20px; max-width:600px; margin:auto; background:#f5f5f8; }
    nav a { margin-right:10px; color:#0077ff; text-decoration:none; }
    .notif { background:white; padding:12px; border-radius:8px; margin-bottom:12px; box-shadow:0 2px 4px rgba(0,0,0,0.1);}
    .time { font-size:0.8em; color:#666; }
  </style>
</head>
<body>
  <nav><a href="feed.html">Feed</a><a href="explore.html">Explore</a><a href="profile.html">Profile</a></nav>
  <h2>Notifications</h2>
  <div id="notes">Loading...</div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
    import { getFirestore, collection, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

    const app = initializeApp({ /* config same as above */ });
    const auth = getAuth(app);
    const db = getFirestore(app);
    const notesEl = document.getElementById('notes');

    onAuthStateChanged(auth, user => {
      if (!user) return notesEl.innerHTML = 'Please log in.';
      const q = query(collection(db, 'users', user.uid, 'notifications'), orderBy('createdAt','desc'));
      onSnapshot(q, snap => {
        notesEl.innerHTML = '';
        snap.forEach(d=>{
          const n = d.data();
          const div = document.createElement('div');
          div.className = 'notif';
          div.innerHTML = `<p><b>${n.fromUser}</b> ${n.type} your post.</p><p class="time">${new Date(n.createdAt?.seconds*1000).toLocaleString()}</p>`;
          notesEl.append(div);
        });
      });
    });
  </script>
</body>
</html>
